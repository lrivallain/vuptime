<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>arc on vUptime.io - Cloud builder(s)</title><link>https://vuptime.io/tags/arc/</link><description>Recent content in arc on vUptime.io - Cloud builder(s)</description><generator>Hugo -- gohugo.io</generator><copyright>Ludovic Rivallain and blog co-authors</copyright><lastBuildDate>Mon, 25 Apr 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://vuptime.io/tags/arc/feed.xml" rel="self" type="application/rss+xml"/><item><title>Public preview – Azure Arc-enabled VMware vSphere – Part 1</title><link>https://vuptime.io/post/2022-04-25-arc-enabled-vmware-vsphere-part1/</link><pubDate>Mon, 25 Apr 2022 00:00:00 +0000</pubDate><guid>https://vuptime.io/2022/04/25/arc-enabled-vmware-vsphere-part1</guid><description>
&lt;h2 id="manage-your-vmware-datacenter-through-azure-cloud-tools">Manage your VMware Datacenter through Azure Cloud tools&lt;/h2>
&lt;p>Announced in &lt;a href="https://azure.microsoft.com/en-us/updates/private-preview-new-azure-arc-capabilities-in-november-2021/">private preview stage&lt;/a> during the &lt;a href="https://aka.ms/IgniteNov21/InnovateAnywhereBlog">Microsoft Ignite&lt;/a> on November 2021, the &lt;a href="https://azure.microsoft.com/en-us/services/azure-arc/#product-overview">Azure Arc&lt;/a> integration with VMware vSphere is now &lt;a href="https://azure.microsoft.com/en-us/updates/public-preview-azure-arc-integration-with-vmware-vsphere/">available in public preview&lt;/a> since March 31&lt;sup>th&lt;/sup>, 2022.&lt;/p>
&lt;p>The feature, still in development process, is now labeled &lt;em>Azure Arc-enabled VMware vSphere&lt;/em>, and provides a unified governance and management solution for lifecycle and guest OS operations of VMware VMs through Azure Arc.&lt;/p>
&lt;blockquote>
&lt;p>As &lt;a href="https://azure.microsoft.com/en-us/services/azure-vmware/">Azure VMware Solutions&lt;/a> private clouds relies on a &lt;a href="https://www.vmware.com/products/cloud-foundation.html">standardized VMware SDDC&lt;/a>, you can also use &lt;em>Azure Arc-enabled VMware vSphere&lt;/em> to operate your AVS-based workloads.&lt;/p>
&lt;/blockquote>
&lt;h3 id="how-it-works-">How it works ?&lt;/h3>
&lt;p>&lt;em>Azure Arc-enabled VMware vSphere&lt;/em> relies on a &lt;em>Resource Bridge&lt;/em> appliance deployed in the target environment (or in a VMware environment with network access to the target one). This bridge will act a the access-point for Azure Arc to get and manage data from vCenter APIs.&lt;/p>
&lt;p>As of now, the &lt;em>Resource Bridge&lt;/em> requires an outbound connectivity to Internet (specifically to to Azure APIs over HTTPS(443)) and can only be deployed on a VMware environment.&lt;/p>
&lt;p>&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge.png" alt="The Azure Arc Resource Bridge act as a gateway for Azure Arc to access and manage VMware based workloads.">&lt;/p>
&lt;p>When the appliance is fully deployed and reports to the Azure Arc APIs, you can browse the inventory and enable some VMware components to be accessible as Azure objects. Azure-Enabled resources from the VMware environment will be attached to:&lt;/p>
&lt;ul>
&lt;li>A &lt;strong>custom location&lt;/strong> representing your VMware Datacenter in Azure&lt;/li>
&lt;li>A &lt;strong>resource group&lt;/strong> to provide ability to organize your resources and to apply RBAC (Role-Based Access Control) strategy&lt;/li>
&lt;/ul>
&lt;h3 id="benefits">Benefits&lt;/h3>
&lt;p>As for Azure Arc, the main goal of &lt;em>Azure Arc-enabled VMware vSphere&lt;/em> is to extend Azure governance and management capabilities on non-Azure environments. In this case to a VMware vSphere infrastructure.&lt;/p>
&lt;p>This provides a &lt;strong>consistent management experience across Azure and VMware vSphere infrastructure&lt;/strong> like:&lt;/p>
&lt;ul>
&lt;li>VMware virtual machine (VM) lifecycle operations: create/register, start/stop, resize, and delete.&lt;/li>
&lt;li>Apply RBAC strategy to provide users and application teams to self-serve VM operations.&lt;/li>
&lt;li>Apply Azure governance strategies across Azure and VMware VMs by enabling guest management (Azure Policies, Update Management, Monitoring etc.).&lt;/li>
&lt;li>Use Azure Resource Manager based API to manage VMware workload (ARM or Bicep templates, Azure APIs and CLI tools).&lt;/li>
&lt;/ul>
&lt;h2 id="resource-bridge-deployment">Resource Bridge Deployment&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>Disclaimer&lt;/strong>: This walkthrough deployment process is not a substitution of the Microsoft Documentation about &lt;a href="https://docs.microsoft.com/en-us/azure/azure-arc/vmware-vsphere/">&lt;em>Azure Arc-enabled VMware vSphere&lt;/em>&lt;/a>. This blog post will not receive major updates to synchronize with the development status of &lt;em>Azure Arc-enabled VMware vSphere&lt;/em> feature and only reflect the process at a specific moment in time.&lt;/p>
&lt;/blockquote>
&lt;h3 id="pre-requisites">Pre-requisites&lt;/h3>
&lt;p>In order to have access to all &lt;em>Azure Arc-enabled VMware vSphere&lt;/em> features, I had to register the following Azure resources providers to my subscription:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Microsoft.ConnectedVMwarevSphere&lt;/code>&lt;/li>
&lt;li>&lt;code>Microsoft.HybridCompute&lt;/code>&lt;/li>
&lt;li>&lt;code>Microsoft.GuestConfiguration&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>I used &lt;a href="https://docs.microsoft.com/en-us/cli/azure/">Azure CLI&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">AZURE_SUBSCRIPTION_ID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;********-****-****-****-************&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">2&lt;/span>&lt;span class="cl">az provider register --wait --subscription &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">AZURE_SUBSCRIPTION_ID&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --namespace Microsoft.ConnectedVMwarevSphere
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">3&lt;/span>&lt;span class="cl">az provider register --wait --subscription &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">AZURE_SUBSCRIPTION_ID&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --namespace Microsoft.HybridCompute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">4&lt;/span>&lt;span class="cl">az provider register --wait --subscription &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">AZURE_SUBSCRIPTION_ID&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> --namespace Microsoft.GuestConfiguration
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resource-requirements">Resource requirements&lt;/h3>
&lt;p>The &lt;em>Resource Bridge&lt;/em> appliance requires the following resources assignment:&lt;/p>
&lt;ul>
&lt;li>4 vCPU&lt;/li>
&lt;li>16GB RAM&lt;/li>
&lt;li>100GB free disk space&lt;/li>
&lt;/ul>
&lt;h3 id="create-the-vcenter-resource-bridge">Create the vCenter Resource Bridge&lt;/h3>
&lt;p>From Azure portal, select the &lt;strong>Azure Arc&lt;/strong> product then:&lt;/p>
&lt;ol>
&lt;li>VMware vCenters (preview)&lt;/li>
&lt;li>(+) Add&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge-creation-01.png" alt="Resource Bridge creation from Azure UI – step 1">&lt;/p>
&lt;p>You will be requested to:&lt;/p>
&lt;ol>
&lt;li>Attach the &lt;em>Resource Bridge&lt;/em> to a subscription, a resource-group and a region (only East US and West Europe are available by now).&lt;/li>
&lt;li>Provide a name for a &lt;em>custom location&lt;/em>&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>The &lt;em>custom location&lt;/em> will represent, in Azure, the location of your vCenter deployment.&lt;/p>
&lt;/blockquote>
&lt;ol start="3">
&lt;li>Provide a name for the vCenter in Azure&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge-creation-02.png" alt="Resource Bridge creation from Azure UI – step 2">&lt;/p>
&lt;p>In the next screen of the wizard, you can attach &lt;em>tags&lt;/em> to your new resource. In the third step, you are invited to download a PowerShell-based (Windows) or Azure CLI-based (Linux) version of a script.&lt;/p>
&lt;blockquote>
&lt;p>If your subscription is not registered with all the required resource providers, a &lt;strong>Register&lt;/strong> button will appear.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge-creation-03.png" alt="Resource Bridge creation from Azure UI – step 3">&lt;/p>
&lt;p>The downloaded script needs to be run from a workstation or &lt;em>jump server&lt;/em> with direct or proxyfied access to the vCenter where the resource bridge will be deployed.&lt;/p>
&lt;p>The last wizard step provide an insight on the resource bridge deployment status, but does not affect the resource creation.&lt;/p>
&lt;p>&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge-creation-04.png" alt="Resource Bridge creation from Azure UI – step 4">&lt;/p>
&lt;h4 id="windows-powershell-script">(Windows) Powershell script&lt;/h4>
&lt;blockquote>
&lt;p>&lt;a href="https://docs.microsoft.com/fr-fr/powershell/azure/?view=azps-7.4.0">Azure PowerShell&lt;/a> module is required.&lt;/p>
&lt;/blockquote>
&lt;p>If you choose the PowerShell (Windows) version of the script:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps1" data-lang="ps1">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">&lt;span class="nb">Set-ExecutionPolicy&lt;/span> &lt;span class="n">-ExecutionPolicy&lt;/span> &lt;span class="n">RemoteSigned&lt;/span> &lt;span class="n">-Scope&lt;/span> &lt;span class="n">CurrentUser&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">2&lt;/span>&lt;span class="cl">&lt;span class="nb">Install-Module&lt;/span> &lt;span class="n">-Name&lt;/span> &lt;span class="n">Az&lt;/span> &lt;span class="n">-Scope&lt;/span> &lt;span class="n">CurrentUser&lt;/span> &lt;span class="n">-Repository&lt;/span> &lt;span class="n">PSGallery&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">3&lt;/span>&lt;span class="cl">&lt;span class="nb">Connect-AzAccount&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">4&lt;/span>&lt;span class="cl">&lt;span class="p">./&lt;/span>&lt;span class="nb">resource-bridge&lt;/span>&lt;span class="n">-onboarding-script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ps1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="linux-azure-cli-script">(Linux) Azure CLI script&lt;/h4>
&lt;blockquote>
&lt;p>&lt;a href="https://docs.microsoft.com/en-us/cli/azure/">Azure CLI&lt;/a> is required.&lt;/p>
&lt;/blockquote>
&lt;p>If you choose the PowerShell (Windows) version of the script:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">az login
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">2&lt;/span>&lt;span class="cl">bash resource-bridge-onboarding-script.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="running-the-deployment-script">Running the deployment script&lt;/h4>
&lt;p>The deployment script will ask for a set of information in order do deploy and configure the &lt;em>resource bridge&lt;/em> appliance.&lt;/p>
&lt;ul>
&lt;li>Proxy settings for the current workstation&lt;/li>
&lt;li>Target vCenter FQDN, username, password&lt;/li>
&lt;li>VM deployment details:
&lt;ul>
&lt;li>VMware logical-datacenter&lt;/li>
&lt;li>Network&lt;/li>
&lt;li>ResourcePool&lt;/li>
&lt;li>Datastore&lt;/li>
&lt;li>VM Folder&lt;/li>
&lt;li>Appliance IP settings&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge-creation-05.png" alt="Resource Bridge creation from Azure UI – step 5">
&lt;img src="https://vuptime.io/images/arc-vmware/arc-resource-bridge-creation-06.png" alt="Resource Bridge creation from Azure UI – step 6">&lt;/p>
&lt;p>The script will run for about 15 minutes to download, deploy and configure the Resource Bridge appliance. When fully deployed, the &lt;em>verification&lt;/em> step of the UI wizard will display a green check to validate that both Azure API and the appliance are communicating together.&lt;/p>
&lt;h2 id="upcoming">Upcoming&lt;/h2>
&lt;p>In the upcoming posts, we will cover the functional capabilities of having VMware resources managed through Azure, from UI or with automation tools.&lt;/p>
&lt;h3 id="credits">Credits&lt;/h3>
&lt;p>Title photo by &lt;a href="https://unsplash.com/@jbcreate_">Joseph Barrientos&lt;/a> on &lt;a href="https://unsplash.com/photos/oQl0eVYd_n8">Unsplash&lt;/a>&lt;/p></description></item></channel></rss>