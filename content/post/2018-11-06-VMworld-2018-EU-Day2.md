---
author: lrivallain
author_name: Ludovic Rivallain
categories:
- VMware
- French
date: "2018-11-06T00:00:00Z"
tags:
- vmware
- vmworld
thumbnail: /images/vmworld2018.jpg
title: VMworld 2018 ‚Äì Recapitulatif jour 2
aliases: 
- /2018/11/06/VMworld-2018-EU-Day2/
---

Second jour, beaucoup plus de monde, une **[General Session](/2018/11/06/VMworld-2018-EU-Day2-GeneralSession/)** folle et toujours plus de conf√©rences:

## #DEV3466BE ‚Äì Putting It All Together: Using VMware Products to Deliver the DevOps Dream

* Auteur de la notice ci-dessous: *[Ludovic Rivallain](/about/#lrivallain)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26750)
* Speakers(s): **Dave Markham**

Cette conf√©rence avait pour but d'expliquer comment utiliser les produits VMware dans un processus de transformation en m√©thodologie *DevOps*.

vCenter configur√© en multi-tenants avec des *resourcesPools* et des droits adapt√©s aux publics de votre soci√©t√©, vRA avec *business groups* etc., Code Stream pour les pipelines et l'automatisation de t√¢ches r√©p√©titives: tout est l√†. Mais force est de constater qu'il manque √† mon avis (@lrivallain speaking) du liant entre ces outils, et qu'obtenir une infrastructure as code dans ces conditions n√©cessite un investissement de temps assez important.

Tout est automatisable, mais il manque peut √™tre de la part de VMware, un peu d'outillage ou de simplification des process internes des produits pour rendre √ßa: convenable et attractif pour une transformation DevOps.

## #NFV2220BE ‚Äì Service Providers Love VMware Integrated OpenStack. Here's Why.

* Auteur de la notice ci-dessous: *[Ludovic Rivallain](/about/#lrivallain)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26786)
* Speakers(s): **Ramkumar Venketaramani**

Alors qu'on pourrait penser qu'en principe, OpenStack et VMware ne cohabitent pas sur les m√™mes segments de march√©, visiblement, ce n'est pas le point de vue de VMware qui esp√®re proposer avec **VMware Integrated OpenStack** (VIO) des r√©ponses √† quelques challenges et difficult√©s rencontr√©es dans le d√©ploiement de la solution  OpenStack.

Pour rappel, la promesse du projet OpenStack est la suivante: *Open Source, Cross Vendor, Standard, Software Defined DataCenter*

Toutefois dans la mise en ≈ìuvre, certains challenges peuvent √™tre rencontr√©s:

* Segmentation des solutions possibles: the *snowflake effet* (un challenge rencontr√© tr√®s souvent dans le milieu des ESN et leurs r√©ponses possibles √† une demande d'expertise autour d'OpenStack
* Monitoring et Op√©rations: difficult√© √† troubleshooter et peu d'outils disponibles et efficace: haut niveau de technicit√© n√©cessaire.
* Upgrades complexes...

La r√©ponse de VMware est VIO (actuellement en version 5.0) en m√™lant le meilleur des mondes VMware et d'OS: En gros il s'agit de mettre en place, en amont d'un DataCenter VMware, les API standards d'OS pour g√©rer, les instances, le compute, le stockage, le r√©seau et les m√©triques.

Pour le moment, les produits suivants sont disponibles (en version 2018.02):

* `nova`
* `cinder`
* `neutron`
* `glance`
* `swift`

Et finalement, √† travers la surcouche VMware, vous op√©rez, sans le savoir, un cloud bas√© sur vSphere/vCenter/NSX tout en utilisant les commandes ou les API d'OpenStack.

## #HCI1552BE ‚Äì Deploying vSAN to 300 Stores in 2 Weeks: An Automation Story

* Auteur de la notice ci-dessous: *[Ludovic Rivallain](/about/#lrivallain)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26347)
* Speakers(s): **Simon Todd, Nigel Venables**

Nigel et Simon souhaitaient par cette conf√©rence, revenir sur un projet d'automatisation r√©alis√© pour un de leur client: un *global food retailer* (*seulement* la 3e chaine de supermarch√© au monde, 6800 magasins, 440 000 employ√©s).

Le but √©tait d'impl√©menter une plateforme r√©siliente, sous la forme d'un canvas, o√π les d√©veloppeurs pourraient librement d√©ployer des VMs et des containeurs. Et par ce fait, de remplacer l'existant qui commen√ßait √† dater.

Le choix de la solution s'est port√© sur des clusters (par magasin) de 3 n≈ìuds vSAN, un uplink unique (10GBps) par n≈ìud (simplicit√©!). Le tout a √©t√© group√© en pod (1000 magasins par pod) avec pour chacun: 2 vCSA *small*, 2 vROPs, et un serveur vRO. Ensuite √† coup de cl√© USB bootable, d'un tr√®s gros workflow vRO (et c'est l√† qu'est la magie: ***Voodoo part***!), tout est pr√©par√© presque automatiquement (seulement les variables √† changer en fonction du lieu) quand un technicien d√©barque dans un magasin avec son nouveau mat√©riel.

Etonnant, VMware a conserv√© une approche semi-automatis√©e: certains inputs viennent d'un √™tre humain afin de lancer le workflow et sont g√©r√©es d√©ploiement par d√©ploiement‚Ä¶ le risque d'erreur est pr√©sent et c'est √©tonnant de n'avoir pas pouss√© plus loin la logique d'automatisation.

Bilan de la conf√©rence: que ferait VMware sans vRO au niveau automatisation ü§î?

## #HYP1499BE ‚Äì VMware Cloud Provider Pod

* Auteur de la notice ci-dessous: *[Antoine Harlaut](/about/#aharlaut)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26995)
* Speakers(s): **Yves Sandfort**, **Wade Holmes**

Au tout d√©but de cette pr√©sentation, VMware a insist√© une nouvelle fois sur leur politique d'hybridation et de moderniser le cloud VMware.

Qu'est-ce qu'est **Cloud Provider Pod** (*CPOD*)?

Un outil qui permet de d√©ployer (avec encore seulement *un clic*) toute une infrastructure pour un cloud provider bas√©e sur la suite *vRealize* et *vCloud Director*. Les produits d√©ploy√©s par *CPOD* 1.0 sont les suivants:

* vRO 7.4
* vROPS 7.0
* vCD 9.1
* vCD Extender 1.0.1
* Usage meter 3.6.1
* vRNI 3.9
* vRLI 4.6.1
* vSphere 6.5u2
* NSX 6.4.1
* vSAN 6.6.1

La prochaine release de *CPOD* int√®grera des versions plus r√©centes.

Tout comme **Vmware Cloud Fundation** avec les *VMware Validated Design*, *CPOD* permet d'offrir une infrastructure destin√©e aux cloud providers avec la certification *VMware cloud verified*.

Le d√©ploiement de l'infrastructure se fait √† travers un formulaire ou avec un fichier de configuration . Le formulaire se d√©compose en 8  √©tapes qui vont du choix du nombre d'h√¥tes ESXi en passant par la configuration VXLAN jusqu'au licensing.

A la fin du d√©ploiement, un package d'une dizaine de documentations est automatiquement g√©n√©r√© suivants les inputs d√©finis lors du d√©ploiement. On retrouve ainsi les documentations suivantes (*liste non exhaustive*):

* Logical design
* Configuration r√©seau
* Configuration guide vCD
* Configuration guide vROps
* Configuration guide VCD Extender
* Config Sheet
* Export de la configuration
* Export package vRO

Pour ce qui nous a √©t√© montr√©, les documentations ont l'air d'√™tre vraiment claires et d√©taill√©es. On nous explique ensuite que le d√©ploiement de l'infrastructure se fait en bonne partie √† travers *vRealize Orchestrator* et que l'on peux extraire ce package et voir en d√©tail ce qu'il fait (voir m√™me de l'adapter √† nos besoins).

Il n'y a plus qu'√† explorer ce produit plus en d√©tail sur les *HOLs* et voir s'il tient ses promesses!

## #NET1559BE ‚Äì SDDC Reference Design with NSX Data Center for vSphere

* Auteur de la notice ci-dessous: *[J√©r√©my Rossignol](/about/#jrossignol)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26843)
* Speakers(s): **Dumlu Timuralp**

Cette conf√©rence √©tait l√† pour nous rappeler les bonnes pratiques et surtout s'avoir s'orienter au d√©but d'un design avec le produit NSX. De l√† on nous fait un petit rappel sur les avantages de NSX et notamment qu'il est compl√®tement agnostique des √©quipements r√©seaux, mis √† part peut √™tre le fait que pour certaines fonctionnalit√©s notamment le hardware VTEP, il faut quand m√™me du mat√©riel sp√©cifique valid√© par VMware.

Ensuite petit retour sur les diff√©rents composants de NSX et aussi de l√† o√π il se trouvent entre le data plane, control plane, management plane et enfin consumption. Jusque l√† aucune surprise, on insiste toujours autant sur le fait que dans le cadre de NSX il y'a toujours un seul NSX *manager* avec 3 *controler* pour un vCenter.

Suivi ensuite par un petit *what's new* de NSX 6.4.x, et on notera le passage √† l'interface graphique en HTML5 -que VMware est en train de g√©n√©raliser √† tous ses logiciels), sinon globalement c'est une version de correction de bug et d'augmentations de limites diverses, pas de grosse fonctionnalit√©s avec cette version.

Passons maintenant au vif du sujet, le speaker nous rappelle bien que notre bible doit √™tre le fameux design reference guide que l'on peut trouver √† [cet endroit](https://communities.vmware.com/docs/DOC-27683). N√©anmoins, il va nous faire part de quelques points qui peuvent √™tre impr√©cis dans ce guide.

Voici quelques une de ses recommandations:

* A partir du moment on utilise un domaine avec plusieurs vcenters, il faudra penser √† utiliser un cluster de management d√©di√© ainsi qu'un vcenter d√©di√© pour celui-ci
* On peut provisionner le mangement, vmotion, stockage mais aussi les portgroups VXLAN sur le m√™me *dvSwitch* (VDS), on fera juste attention au fait qu'ils ne reposent pas tous sur le m√™me *vmKernel*
* On doit utiliser le m√™me num√©ro de VLAN pour le VXLAN sur tous les clusters NSX
* Les jumbo frames doivent √™tre configur√©s sur les ESXs (passage du MTU √† 9000)
* Transport zone *unicast* recommand√©e sauf si vous  disposez d'un grand domaine niveau 2 et dans ce cas on pr√©f√©rera utiliser le mode *Hybrid*

Toutes ces recommendations sont bien s√ªre √† prendre en compte avant l'installation mais pour ce qui est du design du produit NSX en lui m√™me et la configuration √† apporter sur les clusters de ressources, j'ai not√© quelques remarques int√©ressantes:

* Le m√™me VDS pour tous les clusters de ressources
* Pas de edge ECMP sur le m√™me ESXi qu'un DLR control VM
* Pour une edge ECMP, configurer 2 uplinks avec 2 VLANs diff√©rents pour diminuer les interruptions potentielles
* Surtout si possible √©viter le VPC car ce protocole (sauf dans des design bien particuliers) sera plus contre-productif qu'autre chose

Bilan de la conf√©rence: plusieurs points int√©ressants, des rappels qui ne font pas de mal, des points de vigilance de configuration mais aussi d'installation et de design qui ne sont pas forc√©ment explicites et que l'on acquiert en g√©n√©ral seulement avec de l'exp√©rience. En somme, c'√©tait plutot positif, tout √ßa.

## #NS3729KE ‚Äì The NSX Keynote: Building the Network of the Future with the Virtual Cloud Network

* Auteur de la notice ci-dessous: *[J√©r√©my Rossignol](/about/#jrossignol)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26858)
* Speakers:
  * **Tom Corn**, SVP, VMware
  * **Tom Gillis**, SVP/GM, Network & Security, VMware
  * **Sanjay Uppal**, Vice President & GM , VMware
  * **Stefano Firenze**, CIO CNH Industrial, CNH Industrial
  * **Ed Higgs**, Global Service Delivery Director, Rentokil Initial
  * **Faiyaz Shahpurwala**, General Manager, IBM Cloud Platform, IBM
  * **Jean-Marc Voisin**, CTO, ALLIANZ

Le but ici √©tait de donner un aper√ßu de ce que fait NSX et comment il r√©pond aux probl√©matiques des clients.

On a pu voir pour les diff√©rents produits NSX: *NSX Data Center (NSX-v)*, *NSX Cloud (NSX-T)*, *NSX Hybrid connect*, *NSX SD-WAN by velo cloud* et enfin *AppDefense*, diff√©rents usecases clients pr√©sent√©s sous forme de talk pour illustrer les mises en pratique de chaque produit.

Personnellement, le format ne m'a pas enchant√© et plut√¥t que d'annonce(s), la discussion client/fournisseur manquait un peu d'int√©r√™t car les informations qui auraient p√ª √™tre int√©ressantes ont √©t√© noy√©es dans les dicsussions.

N√©anmoins, un produit a attir√© mon attention: *AppDefense*. Il s'agit d'un nouveau produit de VMware permettant d'analyser les processus c√¥t√© OS et de d√©finir des profils de serveurs pour reconna√Ætre les comportements normaux des comportements suspects.

En effet, jusqu'√† maintenant pour se prot√©ger contre des attaques, le comportement standard des antivirus √©tait d'avoir une liste de *"Know bad"* (sous-entendus, des comportement suspects identifi√©s au pr√©alable par le pass√© comme des bouts de codes malveillants par exemple). Avec *AppDefense**, l'id√©e ici est d'utiliser la philosophie *"know good"* pour r√©duire le p√©rim√®tre possible d'une attaque.

Pour rajouter ce *"know good"*, voici comment on proc√®de:

1. A l'installation d'un serveur, une fois tous les applicatifs install√©s et configur√©s, il vous suffit d'analyser les processus d√©tect√©s par *AppDefense* et de cliquer sur un bouton pour √©tablir qu'il s'agit du profil *"normal"* du serveur.
1. A partir de ce moment, si il y'a une attaque ext√©rieure et un comportement qui sort du profil standard, les services seront automatiquement bloqu√©s par *AppDefense* gr√¢ce au machine learning.

Le machine learning permet d'avoir une vue en temps r√©el du comportement d'un serveur et de ces services, ainsi il est possible de mettre en place de mani√®re tr√®s simple de la micro segmentation: plus seulement au niveau √©changes *Est-Ouest* mais aussi au niveau applicatif.

Bilan de la conf√©rence: je dirais que le format ne correspondait pas du tout √† une keynote mais il y'a des moments o√π le fond est plus important que la forme.

## #NET1516BE ‚Äì Introduction to NSX Cloud

* Auteur de la notice ci-dessous: *[J√©r√©my Rossignol](/about/#jrossignol)*
* [Vid√©o](https://videos.vmworld.com/global/2018/videoplayer/26540)
* Speaker(s): **Percy Wadia**

Le but de *NSX Cloud* est de pouvoir prot√©g√© de mani√®re centralis√©e toutes vos apps tournant sur des clouds publics. Un des avantages de *NSX Cloud* est que vous n'avez pas besoin d'avoir l'√©dition *datacenter* au sein de votre infrastructure et que pouvez commencer de 0 avec *NSX Cloud*. Vous allez pouvoir √©tendre vos politiques de s√©curit√© sur vos clouds publics et les g√©rer de mani√®re centralis√©e et homog√®ne (Actuellement, seulement *Azure* et *AWS* sont support√©s) via une seule unique interface graphique ou une seule API.

En reprenant les technologies NSX pour manager ses politiques de s√©curit√© sur *Azure* ou *AWS* par exemple, il est possible d'utiliser les r√®gles *'dynamiques'* propre √† NSX et ainsi √™tre plus r√©actif pour les besoins des d√©veloppeurs.

Par exemple: D√®s qu'une machine virtuelle portera dans son nom `DEV`, elle pourra √™tre placer dynamiquement dans une r√®gle qui aura d√©j√† tous les acc√®s de BDD configur√©s pour que la machine soit op√©rationnelle et pr√™te √† √™tre utilis√©e sans pour autant √™tre ouverte √† tout le r√©seau.

Si un bypass des r√®gles de firewall distribu√©es est identifi√©, la mchine sera mise dynamiquement dans une autre *"policy"* de quarantaine par exemple qui bloquera absolument tous les flux entrants et sortants. Il sera n√©cessaire d'avoir une intervention d'un administrateur pour la d√©bloquer. Il est aussi possible de faire appara√Ætre cette machine directement sur le dashboard et pour la mettre en √©vidence.

A prendre en compte pour un d√©ploiement, le nombre de VMs √† d√©ployer:

* *NSX Manager*: 1 VMs
* *Control Cluster*: 3 VMs

Viens ensuite la connection aux diff√©rents cloud publics qui permet de d√©ployer des *edges gateways* permettant de filtrer l'acc√®s *Nord-Sud* de votre cloud public. Et enfin, vient le d√©ploiement d'agents *NSX* sur les VMs afin de mettre en place des politiques de firewall distribu√©.

Les VMs n'ayant pas d'agent install√© seront d√©tect√©es comme √©tant non conformes et il est possible de lancer √† distance l'installation de l'agent ou encore de l'ignorer si l'on estime que telle ou telle VM n'en a pas besoin.

Le produit semble vraiment int√©ressant: notamment le fait de pouvoir r√©utiliser la micro-segmentation NSX avec les groupes de s√©curit√© *dynamiques* (et non plus uniquement via une information r√©seau, IP ou DNS). Il reste √† voir si VMware arrivera √† g√©n√©raliser ce produit de mani√®re simple malgr√© la multitude d'offres cloud qui existent sur le march√©.

## #EDU7505E ‚Äì Advanced Troubleshooting for the VMware NSX Distributed Firewall

* Auteur de la notice ci-dessous: *[J√©r√©my Rossignol](/about/#jrossignol)*
* [Vid√©o](https://videos.vmworld.com/global/2018?q=EDU7505E)
* Speaker(s): **Tim Burkard**

> You shall not pass !

Voil√† ce que l'on attend de notre firewall et c'est sur ces 4 petits mots que commence la session. L'utilit√© de notre firewall distribu√© est bien d'emp√™cher les attaques sur nos syst√®mes mais aussi les emp√™cher de pouvoir rebondir depuis un serveur via une porte d√©rob√©e.

N√©anmoins sans les bons outils il peut √™tre difficile de bien diagnostiquer les probl√®mes de communication. La difficult√© lorsque l'on met en place la micro segmentations avec le firewall distribu√© est bien de s'assurer que l'on  ne va pas contraindre les applications et se cr√©er de nouveaux probl√®mes.

Le sujet ici est de savoir analyser en temps r√©el ce qui se passe au sein de notre infrastructure au niveau r√©seau et firewalling.

NSX introduit des outils qui nous permettent de r√©pondre √† cette probl√©matique:

* **Flow Monitoring**: Gr√¢ce √† lui il est possible d'analyser en temps r√©el via une interface graphique le traffic r√©seau. Il permet aussi de bloquer ou d'autoriser via un simple clic le traffic affich√©.
* **Traceflow**: Cet outil permet de tester la communication depuis un source vers une target donn√©e par le port que on lui indiquera.
* **Packet Capture**: Comme son nom l'indique, il va permettre de capturer les trames √† la mani√®re d'un *wireshark*.
* Et bien s√ªr dans l'interface graphique de NSX vous disposez aussi de l'**event viewer** et des derniers **logs** de l'applicatif.

Si jamais ces informations ne suffisent pas, il ne faut pas oublier qu'il existe aussi *CLI NSX*, √† ex√©cuter depuis le *NSX manager*: Lancer une session SSH sur votre NSX manager et utiliser la commande:

```bash
pktcap-uw
```

Une commande int√©ressante permettant de faire du debug:

```bash
pktcap-uw --dvFilter dvfilter_name --capture PreDVFilter|PostDVFilter [filter_options] [--outfile pcap_file_path [--ng]] [--count number_of_packets]
```

Avec cette commande il est possible d'analyser les flux en entr√©e et √† la sortie de votre *distributed firewall* et ainsi voir si c'est lui qui vous bloque ou non un flux particulier.

**Rappel**: pour ceux qui aiment aller voir les logs concernant *NSX* et les *DLR* ou *DFW*: Sans *LogInsight*, les logs seront √©parpill√©s entre tous vos ESXi...