---
author: lrivallain
author_name: Ludovic Rivallain
categories:
- VMware
- French
date: 2020-10-01
tags:
- vmware
- vmworld
thumbnail: /images/vmworld2020/vmworld2020.png
title: VMworld 2020 ‚Äì R√©capitulatif jour 2
aliases: 
- /2020/10/01/VMworld-2020-EU-Day2/
---

## Conclusion

Ce n'est pas logique mais je vais conclure ce couple d'articles au sujet du VMworld avant les r√©sum√©s des conf√©rences regard√©es ce jour (que vous trouverez donc plus bas dans le pr√©sent article).

Forc√©ment, un √©v√®nement en virtuel n'a pas la saveur d'un √©v√®nement en pr√©sentiel, surtout quand on appr√©cie de retrouver √† cette occasion, des connaissances, des coll√®gues, des partenaires de travail. Techniquement, j'aurais tout aussi bien pu regarder hors de la p√©riode du VMworld, les sessions, qui √©taient d√©j√† enregistr√©es et diffus√©es √† la demande et non en live. Je pr√©cise "techniquement" car je suis √† peu pr√®s certain que si je n'avais pas utiliser ces deux jours pour regarder ces sessions, je n'aurais jamais trouv√© ou prit le temps ensuite de le faire, √† cette √©chelle.

Je suis donc content d'avoir p√ª en profiter pendant 2 jours: de m'√™tre nourris de nouvelles technologie, de nouveaux points de vue sur l'√©tat de l'art des infrastructures. Je n'ai pas utilis√© les moyens de mise en relation virtuelle des participants: Discord (j'√©tais connect√© mais peu actif), Cloud City, le pass premium et les interractions avec les *experts* qui √©taient propos√©es. J'ai **consomm√©** le contenu des *breakout sessions* et je n'ai pas **particip√©**, c'est mon seul regr√™t cette ann√©e. Les explications sont multiples et personnelles. Je t√¢cherais de travailler l√† dessus si un nouvel √©v√®nement virtuel de ce type devait avoir lieu l'an prochain: j'esp√®re que non tout de m√™me ü§û.

La qualit√© des *breakout sessions* auxquelles j'ai assist√© √©tait variable. Je ne regarde g√©n√©ralement que les sessions annonc√©es avec un *technical level* √† 300, mais malgr√© cel√†, il y avait peu de s√©ance vraiment techniques et les *deep dives* ne sont plus forc√©ment si complexes et si int√©ressants de ce point de vue. Je pense qu'il faudrait militer pour faire apparaitre un *technical level* de 400 histoire de pouvoir s√©lectionner des contenus **syst√®matiquement techniques**.

En terme d'exp√©rience utilisateur sur le site et les vid√©os: un beau travail a √©t√© r√©alis√© pour que le contenu soit facilement accessible, compr√©hensible, pr√©sent√© de mani√®re coh√©rente. Quelques bugs du site ont toutefois ternis un peu l'exp√©rience, sans √™tre trop g√©nants. La qualit√© des captations √©tait variables selon les speakers qui ont d√ª aussi, improviser chez eux, avec les moyens du bords (ou du moins forc√©ment limit√©s). Il aura manqu√© un verre d'eau par-ci pour faire passer une quinte de toux, des notifications slack en silencieux par l√†, un fond vert pour untel ou des transitions plus naturelles entre 2 speakers d'une m√™me session. Mais globalement, c'√©tait vraiment tr√®s bien et ce f√ªt tr√®s appr√©ci√©.

Le dernier point (last but not least), forc√©ment, cette ann√©e, pas de soir√©e(s) dans les rues, bars et boites de Barcelone. Boire un mojito seul devant mon √©cran de PC pendant un DJ set ne m'ayant pas particuli√®rement attir√©, j'ai vaqu√© √† des occupations diff√©rentes lors de mes soir√©es cette ann√©e.

Allez, place aux r√©sum√©s de pr√©sentation de cette derni√®re journ√©e:

## Automate IT Processes with vRealize Automation and vRealize Orchestrator `[HCMB2254]`

* Speakers(s):
  * **Francisco Poo Hernandez**, Senior Technical Marketing Manager, VMware
  * **Galina Kostova**, Senior Product Manager, VMware

Cette courte session (33') propose de d√©couvrir les moyens d'automatiser des process IT √† l'aide de vRealize Automation et vRealize Orchestrator. La premi√®re explication concernant ce dernier est au sujet du support (assez r√©cent) de langages de programmation tels que:

* Python 3.7
* PowerCLI 11 / PowerShell 6.2
* Node.js 10 et 12
* Javascript 5 (JavaScript √©tait d√©j√† support√© auparavant, toutefois, √† chaud comme √ßa, le versionning ne me parle pas et ne correspond pas √† celui des sp√©cifications officielle de JS: [https://fr.wikipedia.org/wiki/JavaScript#Versions](voir l'article Wikip√©dia sur JavaScipt)... Est-ce un moteur ou une nu  m√©rotation interne?)

Puis l'on aborde ABX (Action Based Extensibility) dont le but est de d√©clencher, via moteur d‚Äôex√©cution l√©ger, des scripts en fonction d'√©v√®nements sp√©cifiques. On est clairement dans le mode "event driven" qui devient de plus en plus pr√©sent pour les t√¢ches simples dans le monde de l'IT.

C'est d'ailleurs un crit√®re de choix √©voqu√© lorsqu'on a la possibilit√© d'automatiser une t√¢che √† l'aide de vRO ou d'ABX. vRO s'en sort forc√©ment mieux pour des t√¢ches complexes ou fortement li√©es √† des composants vari√©s via sa notion de plugins, de workflows encha√Ænant des actions pouvant √™tres tr√®s vari√©es. ABX s'adapte toutefois mieux √† des t√¢ches rapides, l√©g√®res et simples et ses actions peuvent aussi √™tre cha√Æn√©es (presqu'√† la mani√®re d'un framework vRO) et c'est un produit plus orient√© cloud que on-premise.

La seconde partie de la pr√©sentation concerne `Code Stream`, le produit de *pipelines DevOps* de VMware. Bon nombre de *endpoints* sont disponibles mais finalement la pr√©sentation s'attarde sur l'int√©gration de vRO et Docker dans `Code Stream` pour les t√¢ches de CI.

Enfin, Francisco propose une d√©monstration: √† partir d'une recommandation de *Skyline Advisor* √† propros d'une menace potentielle li√©e aux failles *Spectre/Meltdown* pr√©sente sur l'infrastructure, d√©clencher une interaction avec vRO: d√©clencher un workflow qui permettra de r√©soudre la situation (ici il s'agit de mettre √† jour le virtual-hardware de la machine). Puis la d√©monstration utilise `Code Stream` et un pipeline complexe afin de valider tous les impacts potentiels de cette action de rem√©diation.

{{< figure src="/images/vmworld2020/HCMB2254_codestream_demo.png" title="Demo CodeStream" >}}

Cette t√¢che pourra √™tre lanc√©e:

* Manuellement depuis le *service broker* de vRA
* Automatiquement lors d'une notification de *Skyline Advisor*

Pour ma part, je ne suis pas encore un gros utilisateur de `Code Stream` mais je pense qu'il constitue un *wrapper* int√©ressant pour piloter un encha√Ænement de workflow vRO et d'actions cod√©es dans d'autres types de langage. Finalement, c'est un compl√©ment des d√©veloppements vRO qui permet de superviser d'une autre mani√®re l‚Äôex√©cution des workflows et d'un potentiel encha√Ænement.


## Deep Dive: Troubleshooting Applications Without TCPdump `[VCNC1920]`

* Speakers(s):
  * **Nathan McMahon**, Director, Avi Enablement, VMware
  * **Ashutosh Gupta**, Software Architect, VMware

`tcpdump` est un outil qui a 35 ans et pourtant, c'est un outil qui peut aider un administrateur au quotidien quand il s'agit de troubleshooter un probl√®me r√©seau, y compris lorsque vous travaillez avec de gros volumes de transfert. Toutefois, cela reste un outil basique qui n√©cessite:

* de savoir qu'on a un probl√®me pour avoir √† utiliser cette commande (ce n'est pas un outil qui vous d√©tecte les pannes r√©seau, mais qui vous aide √† comprendre ce qui s'y passe).
* de capturer le trafic au moment o√π le probl√®me appara√Æt (pas de retour en arri√®re sur des mesures conserv√©e en m√©moire au fil de l'eau par exemple, pas de statistiques si l'outil n'est pas en cours d'ex√©cution...)
* il faut un acc√®s au segment r√©seau concern√© par l'incident (via une VM par exemple)
* il faut avoir bien configur√© `tcpdump` avant l‚Äôoccurrence du probl√®me pour trier au mieux les √©l√©ments de la capture

Ces contraintes semblent importantes mais en r√©alit√©, ce vieil outil est tout de m√™me tr√®s pratique pour diagnostiquer des probl√®mes r√©seau et est presque, incontournable. Forc√©ment, un outil de 35 ans va √™tre limit√© √† appr√©hender les √©volutions r√©centes du contenu qui passe sur les r√©seaux: HTTP/2, SSL presque partout, volumes d√©multipli√©s... c'est possible, mais √ßa devient complexe.

De nouveau outils lui font √† pr√©sent concurrence pour mieux appr√©hender ses limites et contraintes: vRealize Network Insight par exemple permet de faire bien plus de chose, via des √©chantillonnage, de l'apprentissage, des sondes positionn√©es sur des segments multiples, de la conservation de m√©triques...

Avec les logs de VMware NSX-T *Advanced Load Balancer* (ex AVI) il est aussi possible de collecter des informations tr√®s int√©ressantes au moment de diagnostique un souci qui pourrait √™tre li√© au r√©seau, sur une application. C'est l'objet de la d√©monstration qui suit et qui vise √† montrer la mani√®re de d√©tecter, au sein d'un pool applicatif, de potentiels erreurs ou probl√®mes de performances. Froc√©ment, ce produit permet de faire √©norm√©ment plus de chose que `tcpdump`, notamment si on veut mesurer l'√©tat d'une application distribu√©e, au del√† de l'√©tat d'une simple connection r√©seau.

{{< figure src="/images/vmworld2020/VCNC1920_avi_demo.png" title="Demo AVI" >}}


## NSX-T Container Networking Deep Dive `[VCNC1163]`

* Speakers(s):
  * **Yasen Simeonov**, Senior Technical Product Manager, VMware
  * **Ali Al Idrees**, Lead EMEA SDDC Solutions Architect, VMware

Ce n'est plus tr√®s nouveau, VMware vise depuis quelques ann√©es √† pousser NSX-T pour tous les types de workload d'une infrastructure, que vous utilisiez du bare-metal, de la virtualisation, du Kubernetes... L'int√©gration avec ce dernier type de workload est √† pr√©sent plut√¥t mature et permet √† pr√©sent de partager un *Shared T1 router* entre `namespaces` diff√©rents (avant le seul mod√®le √©tait de d√©ployer un *routeur T1* par `namespace`).

Avec *NSX Container Plug-in* (NCP), NSX-T DataCenter peut √™tre √† la fois int√©gr√© avec K8S, *OpenShift, Pivotal Cloud Foundry* etc. Cette int√©gration permet par exemple d'utiliser:

* Persistance de r√®gles de IP par service (K8s)
* Les metadata de K8S au sein de NSX sous forme de tags qui sont propag√©s automatiquement pour la r√©alisation de r√®gles de s√©curit√©.
* des r√®gles de s√©curit√© dans les description de service K8S
* Load Balancing int√©gr√©...

Ensuite la pr√©sentation aborde *Tanzu Application Service* et notamment la partie r√©seau et s√©curit√©: comment sont provisionn√©s les segments r√©seau, les routeurs T1, l‚Äôinterconnexion via le T0, la cr√©ation de nouveaux segments r√©seaux par tenant (Org).

Avec *vSphere with Tanzu* (vSphere 7) il devient possible de mixer `pods` et machine virtuelles au sein d'un `namespace` ce qui rend plus coh√©rent l'administration g√©n√©rale, tout en rendant un peu complexe, la liste de couches d'infrastructures impliqu√©es:

{{< figure src="/images/vmworld2020/VCNC1163_vsphere_with_tanzu.png" title="VCNC1163 vSphere with Tanzu" >}}

Si vous pr√©f√©rez *OpenShift* (4), l'int√©gration est presque aussi aboutie et un projet d'op√©rateur sp√©cifique pour NSX-T est en cours de d√©veloppement dans les √©quipes VMware (ou de Red Hat, ou des deux, ce n'√©tait pas clair).

La pr√©sentation se termine avec une d√©monstration de la `Hipster shop`, une pseudo-boutique en ligne dont l'architecture utilise massivement les *micro-services*. Au cours de la mise en place de cette boutique virtuelle sur un cluster OpenShift, on peut voir les interactions avec NSX-T, l'arriv√©e de nouveaux ports sur les segments, la cr√©ation de r√®gles de s√©curit√© etc. L'usage de l'outil `Traceflow` int√©gr√© √† NSX-T permet aussi l'analyse de potentielles erreurs r√©seau: ici une r√®gle de s√©curit√© bloquait le flux esp√©r√©.


## VMware Cloud Foundation Deep Dive `[HCI2519]`

* Speakers(s):
  * **Jason Shaw**, Senior Technical Marketing Architect, VMware

La solution de base pour une architecture standardis√©e de SDDC chez VMware s'appelle *"Cloud Foundation"*. Bas√©e sur la recommandation d'utiliser des n≈ìuds mat√©riels *'vSAN ready'*, cette mani√®re de concevoir et d√©ployer un socle standard d'architecture permet de s'affranchir des *silos de complexit√©* g√©n√©r√© par des choix op√©r√©s au fil de l'eau, des besoin, des projets, des changements d'avis.

Grace √† des tests pouss√©s cot√© VMware, vous avez une sorte de garantie vis √† vis d'une association de produits et de versions:

{{< figure src="/images/vmworld2020/HCI2519_VCF_products.png" title="HCI2519 VCF products" >}}

Issu des *VMware Validated Designs*, le concept *Application Virtual Networks* (AVN) (des *overlay* r√©seau d√©di√©s pour une solution applicative) est fortement utilis√© pour vCF.

Un certain nombre de t√¢ches plus ou moins complexes de la vie d'un SDDC sont aussi prises en charges par VCD telles que:

* Le d√©ploiement de Edge NSX (HA, password management, lifecycle management...)
* La configuration de vSAN et vVol (ce dernier depuis vCF4.1)
* L'ajout de nouveaux hosts (scale-out) sur les *workload domains*

Une d√©monstration de ce dernier point permet de voir ce qui est requis pour d√©marrer ce type de t√¢che: grosso modo, un fichier `json` avec les FQDN des hosts (install√©s!) et leur infos d'authentification. Une bonne dose de v√©rifications sont tout de m√™me √† r√©aliser en amont: la checklist est propos√©e dans le wizard de vCF.

Bien s√ªr, Cloud Foundation propose aussi d'aider pour g√©rer le cycle de vie des composants d√©ploy√©s: notamment pour mettre √† jour les composants, les certificats SSL.

Les API (et le *Developer Center*) disponibles sur vCF permettent d'automatiser certaines op√©rations sans m√™me passer par l'interface graphique.

Enfin, on nous pr√©sente la notion de *True Hybrid Cloud*, une promesse de VCF pour que vous puissiez envisager de migrer toute ou partie de votre SDDC vers des providers compatibles (on pense forc√©ment √† VMware on AWS!) √† l'aide de HCX.


{{< figure src="/images/vmworld2020/vmworld2020.png" title="VMworld 2020" >}}